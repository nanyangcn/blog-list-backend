(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{104:function(e,t,n){e.exports=n(133)},132:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(10),c=n.n(l),u=n(19),o=n(23),i=n(181),s=n(14),m=n(182),d=function(){var e=Object(u.c)((function(e){return e.notification}));return e.message?r.a.createElement("div",null,r.a.createElement(m.a,{severity:e.type},e.message)):null},p=n(17),f=n(31),E=n(171),v=n(53),b=n.n(v),h=function(e){var t=e.handleCreateBlog;return r.a.createElement("div",null,r.a.createElement(p.c,{initialValues:{title:"",author:"",url:""},onSubmit:function(e,n){var a=n.setSubmitting;t(e),a(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(p.b,null,r.a.createElement("div",null,r.a.createElement(p.a,{component:f.a,label:"title",variant:"filled",type:"text",name:"title",id:"inputTitle",fullWidth:!0})),r.a.createElement("div",null,r.a.createElement(p.a,{component:f.a,label:"author",variant:"filled",type:"text",name:"author",id:"inputAuthor"})),r.a.createElement("div",null,r.a.createElement(p.a,{component:f.a,label:"url",variant:"filled",type:"text",name:"url",id:"inputUrl",fullWidth:!0})),r.a.createElement(E.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(b.a,null),id:"createButton",type:"submit",disabled:t},"create"))})))},g=n(90),y=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),l=Object(g.a)(n,2),c=l[0],u=l[1],o={display:c?"none":""},i={display:c?"":"none"},s=function(){u(!c)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement(E.a,{variant:"contained",onClick:s},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement(E.a,{variant:"contained",onClick:s},"cancel")),r.a.createElement("br",null))}));y.displayName="Toggle";var w=y,O=n(173),k=n(177),x=n(176),j=n(172),C=n(175),I=n(174),S=n(134),R=function(e){var t=e.handleCreateBlog,n=e.createBlogRef,a=Object(u.c)((function(e){return e.blogs})).map((function(e){return e}));return a.sort((function(e,t){return t.likes-e.likes})),r.a.createElement("div",null,r.a.createElement(w,{buttonLabel:"new blog",ref:n},r.a.createElement(h,{handleCreateBlog:t})),r.a.createElement(j.a,{component:S.a},r.a.createElement(O.a,null,r.a.createElement(I.a,null,r.a.createElement(C.a,null,r.a.createElement(x.a,null,"Blog Title"),r.a.createElement(x.a,null,"Author"),r.a.createElement(x.a,null,"Likes"))),r.a.createElement(k.a,null,a.map((function(e){return r.a.createElement(C.a,{key:e.id},r.a.createElement(x.a,{component:"th",scope:"row"},r.a.createElement(o.b,{to:"/blogs/".concat(e.id)},e.title)),r.a.createElement(x.a,{component:"th",scope:"row"},e.author),r.a.createElement(x.a,null,e.likes))}))))))},T=function(e){var t=e.handleLogin;return r.a.createElement("div",{style:{textAlign:"center",margin:"auto",position:"absolute",width:"300px",height:"400px",top:0,left:0,right:0,bottom:0}},r.a.createElement("h2",null,"Log in to application"),r.a.createElement(p.c,{initialValues:{username:"",password:""},onSubmit:function(e,n){var a=n.setSubmitting;t(e),a(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(p.b,null,r.a.createElement("div",null,r.a.createElement(p.a,{component:f.a,label:"username",variant:"outlined",id:"username",type:"text",name:"username"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(p.a,{component:f.a,label:"password",variant:"outlined",id:"password",type:"password",name:"password"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(E.a,{id:"loginButton",type:"submit",disabled:t,variant:"contained",color:"primary",style:{maxWidth:"210px",maxHeight:"55px",minWidth:"210px",minHeight:"55px"}},"login")))})))},L=function(){var e=Object(u.c)((function(e){return e.users}));return r.a.createElement("div",null,r.a.createElement(j.a,{component:S.a},r.a.createElement(O.a,null,r.a.createElement(I.a,null,r.a.createElement(C.a,null,r.a.createElement(x.a,null,"User"),r.a.createElement(x.a,null,"Blogs Created"))),r.a.createElement(k.a,null,e.map((function(e){return r.a.createElement(C.a,{key:e.id},r.a.createElement(x.a,null,r.a.createElement(o.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement(x.a,null,e.blogs.length))}))))))},A=function(e){var t=e.userSelected,n=Object(u.c)((function(e){return e.users}));if(!t)return null;var a=n.find((function(e){return e.username===t.username}));return r.a.createElement("div",null,r.a.createElement("h2",null,t.name),r.a.createElement(j.a,{component:S.a},r.a.createElement(O.a,{size:"small"},r.a.createElement(I.a,null,r.a.createElement(C.a,null,r.a.createElement(x.a,null,"added blogs"))),r.a.createElement(k.a,null,a.blogs.map((function(e){return r.a.createElement(C.a,{key:e.id},r.a.createElement(x.a,{component:"th",scope:"row"},r.a.createElement(o.b,{to:"/blogs/".concat(e.id)},e.title)))}))))))},B=n(87),N=n.n(B),U=n(178),G=function(e){var t=e.blog,n=e.handleCreateComment;return r.a.createElement("div",null,r.a.createElement(p.c,{initialValues:{comment:""},onSubmit:function(e,a){var r=a.setSubmitting;n(t,e),r(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(p.b,null,r.a.createElement("div",null,r.a.createElement(p.a,{component:f.a,label:"new comment",variant:"filled",fullWidth:!0,type:"text",name:"comment",id:"inputComment"}),r.a.createElement(E.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(b.a,null),id:"createCommentButton",type:"submit",disabled:t},"add comment")))})))},z=function(e){var t=e.loggedUser,n=e.blog,a=e.handleLikeClick,l=e.handleRemoveClick,c=e.handleCreateComment;if(!n)return null;var u={display:t.username===n.user.username?"":"none"};return r.a.createElement("div",{className:"blog"},r.a.createElement("div",null,r.a.createElement("h2",null,n.title," - ",n.author),r.a.createElement("a",{href:n.url},n.url),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(U.a,null),r.a.createElement("br",null),r.a.createElement("div",null,"added by ",r.a.createElement("b",null,n.user.name," "),r.a.createElement(E.a,{style:u,size:"small",variant:"contained",color:"secondary",startIcon:r.a.createElement(N.a,null),id:"removeButton",onClick:function(){return l(n)}},"remove"))),r.a.createElement("div",null,r.a.createElement("span",{className:"likes"},n.likes," likes "),r.a.createElement(E.a,{size:"small",variant:"outlined",color:"primary",id:"likeButton",onClick:function(){return a(n)}},r.a.createElement("span",{role:"img","aria-label":"likeIcon"},"\ud83d\udc4dlike"))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(U.a,null),r.a.createElement("h3",null,"comments"),r.a.createElement(j.a,{component:S.a},r.a.createElement(O.a,{size:"small"},r.a.createElement(k.a,null,n.comments.map((function(e,t){return r.a.createElement(C.a,{key:t},r.a.createElement(x.a,{component:"th",scope:"row"},e))}))))),r.a.createElement("br",null),r.a.createElement(U.a,null),r.a.createElement("br",null),r.a.createElement(G,{blog:n,handleCreateComment:c})))},M=n(179),V=n(180),W=n(170),_=function(e){var t=e.handleLogout,n=Object(u.c)((function(e){return e.loggedUser}));return r.a.createElement("div",null,r.a.createElement(M.a,{position:"static"},r.a.createElement(V.a,null,r.a.createElement(E.a,{color:"inherit"},r.a.createElement(o.b,{style:{color:"inherit"},to:"/"},"blogs")),r.a.createElement(E.a,{color:"inherit"},r.a.createElement(o.b,{style:{color:"inherit"},to:"/users"},"users")),r.a.createElement(W.a,{style:{flexGrow:1}}),r.a.createElement("b",null,n.name),r.a.createElement(E.a,{size:"small",variant:"outlined",color:"secondary",id:"logoutButton",onClick:t},"Logout"))),r.a.createElement("br",null))},J=n(91),Z=n(7),H=n.n(Z),K=n(12),D=n(70),q=n(28),F=n.n(q),P="/api/blogs",Q=null,X={getAll:function(){var e=Object(K.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(P);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(K.a)(H.a.mark((function e(t){var n,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:Q}},e.next=3,F.a.post(P,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createComment:function(){var e=Object(K.a)(H.a.mark((function e(t,n){var a,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Q}},e.next=3,F.a.post("".concat(P,"/").concat(t,"/comments"),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(){var e=Object(K.a)(H.a.mark((function e(t){var n,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:Q}},e.next=3,F.a.put("".concat(P,"/").concat(t.id),t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(K.a)(H.a.mark((function e(t){var n,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:Q}},e.next=3,F.a.delete("".concat(P,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){Q="bearer ".concat(e)}},Y=null,$={message:null,type:"message"},ee=function(e,t){return function(){var n=Object(K.a)(H.a.mark((function n(a){return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:clearTimeout(Y),a({type:"MESSAGE",data:e}),Y=setTimeout((function(){return a({type:"RESET"})}),1e3*t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},te=function(e,t){return function(){var n=Object(K.a)(H.a.mark((function n(a){return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:clearTimeout(Y),a({type:"ERROR",data:e}),Y=setTimeout((function(){return a({type:"RESET"})}),1e3*t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE":var n={message:t.data,type:"success"};return n;case"ERROR":var a={message:t.data,type:"error"};return a;case"RESET":return $;default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE":var n=[].concat(Object(D.a)(e),[t.data]);return n;case"LIKE":var a=e.map((function(e){return e.id===t.data.id?t.data:e}));return a;case"REMOVE":var r=e.filter((function(e){return e.id!==t.data.id}));return r;case"INITIALIZE_BLOG":var l=Object(D.a)(t.data);return l;case"CREATE_COMMENT":var c=e.map((function(e){return e.id===t.data.id?t.data:e}));return c;default:return e}},re=function(){var e=Object(K.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var n=t.data;return n;case"LOGOUT":return null;default:return e}},ce={getAll:function(){var e=Object(K.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE_USERS":var n=t.data;return n;default:return e}},oe=function(){var e=Object(u.b)(),t=Object(s.f)(),n=Object(u.c)((function(e){return e.loggedUser})),l=Object(u.c)((function(e){return e.users})),c=Object(u.c)((function(e){return e.blogs}));Object(a.useEffect)((function(){e(function(){var e=Object(K.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.getAll();case 2:n=e.sent,t({type:"INITIALIZE_BLOG",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e,n]),Object(a.useEffect)((function(){e((function(e){var t=window.localStorage.getItem("loggedBlogAppUser");if(t){var n=JSON.parse(t);e({type:"LOGIN",data:n}),X.setToken(n.token)}}))}),[e]),Object(a.useEffect)((function(){e(function(){var e=Object(K.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getAll();case 2:n=e.sent,t({type:"INITIALIZE_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e,c]);var o=Object(a.useRef)(),i=function(t){e(function(e){return function(){var t=Object(K.a)(H.a.mark((function t(n){var a;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(a=Object(J.a)({},e)).likes+=1,t.next=5,X.update(a);case 5:n({type:"LIKE",data:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(te(t.t0.response.data.error,5));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},m=function(n){e(function(e){return function(){var t=Object(K.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Remove blog ".concat(e.title," by ").concat(e.author))){t.next=12;break}return t.prev=2,t.next=5,X.remove(e.id);case 5:n({type:"REMOVE",data:e}),n(ee("blog deleted",5)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(te(t.t0.response.data.error,5));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}(n)),t.push("/")},p=Object(s.g)("/users/:id"),f=p?l.find((function(e){return e.id===p.params.id})):null,E=(p=Object(s.g)("/blogs/:id"))?c.find((function(e){return e.id===p.params.id})):null;return n?r.a.createElement("div",null,r.a.createElement(_,{handleLogout:function(){e((function(e){window.localStorage.removeItem("loggedBlogAppUser"),e({type:"LOGOUT",data:null})})),t.push("/")}}),r.a.createElement(d,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/users/:id"},r.a.createElement(A,{userSelected:f})),r.a.createElement(s.a,{path:"/users"},r.a.createElement(L,null)),r.a.createElement(s.a,{path:"/blogs/:id"},r.a.createElement(z,{loggedUser:n,blog:E,handleLikeClick:i,handleRemoveClick:m,handleCreateComment:function(t,a){e(function(e,t,n){return function(){var a=Object(K.a)(H.a.mark((function a(r){var l;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,X.createComment(e.id,t);case 3:(l=a.sent).user={},l.user.username=n.username,r({type:"CREATE_COMMENT",data:l}),r(ee("new comment added",5)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),r(te(a.t0.response.data.error,5));case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(t,a,n))}})),r.a.createElement(s.a,{path:"/"},r.a.createElement(R,{handleCreateBlog:function(t){o.current.toggleVisibility(),e(function(e,t){return function(){var n=Object(K.a)(H.a.mark((function n(a){var r;return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,X.create(e);case 3:(r=n.sent).user={},r.user.username=t.username,a({type:"CREATE",data:r}),a(ee("a blog ".concat(e.title," by ").concat(e.author," added"),5)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a(te(n.t0.response.data.error,5));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},handleLikeClick:i,handleRemoveClick:m,createBlogRef:o})))):r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement(T,{handleLogin:function(t){e(function(e){return function(){var t=Object(K.a)(H.a.mark((function t(n){var a;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re(e);case 3:a=t.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(a)),X.setToken(a.token),n({type:"LOGIN",data:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(te(t.t0.response.data.error,5));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}))},ie=n(38),se=n(88),me=n(89),de=Object(ie.combineReducers)({blogs:ae,users:ue,loggedUser:le,notification:ne}),pe=Object(ie.createStore)(de,Object(se.composeWithDevTools)(Object(ie.applyMiddleware)(me.a)));n(132);c.a.render(r.a.createElement(o.a,null,r.a.createElement(u.a,{store:pe},r.a.createElement(i.a,{maxWidth:"lg"},r.a.createElement(oe,null)))),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.f016f9f4.chunk.js.map